(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function m(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function d(t){if(t.ep)return;t.ep=!0;const e=m(t);fetch(t.href,e)}})();function w(){const n=document.getElementById("theme-toggle");n&&(document.body.classList.add("dark-mode"),n.textContent="â˜€ï¸ Light Mode",n.addEventListener("click",()=>{document.body.classList.toggle("dark-mode");const s=document.body.classList.contains("dark-mode");n.textContent=s?"â˜€ï¸ Light Mode":"ğŸŒ™ Dark Mode"}))}const N=document.querySelector(".lds-ripple-container");function P(n){const s=document.getElementById("section1"),m=document.getElementById("load-more");if(!s||!m)return;let d=1;const t=6;async function e(a,i){const p=i;try{return(await(await fetch(`https://image-feed-api.vercel.app/photos?limit=${p}&page=${a}`)).json()).map(o=>({src:o.url||o.download_url||"",alt:o.title||"photo",likesCount:o.likes_count||0,commentsList:o.comments||[]})).filter(o=>o.src)}catch(r){return console.warn("API fetch failed, using placeholder images:",r),Array.from({length:p},(l,o)=>({src:`https://picsum.photos/seed/${a}-${o}/600/400`,alt:"placeholder"}))}}function c(a,i){const p=document.createElement("div");p.className="comment";const r=document.createElement("span");r.textContent=i;const l=document.createElement("span");l.className="comment-time",l.textContent=new Date().toLocaleString(),p.appendChild(r),p.appendChild(l),a.appendChild(p)}function b(a){a.forEach((i,p)=>{const r=document.createElement("div");r.className="photo-card";const l=document.createElement("img");l.src=i.src,l.alt=i.alt,l.addEventListener("click",()=>n(p,a.map(y=>({url:y.src}))));const o=document.createElement("div");o.className="actions";let C=i.likesCount,L=!1;const g=document.createElement("button");g.className="like-btn",g.textContent=`â¤ï¸ ${C}`,g.addEventListener("click",()=>{L=!L,C+=L?1:-1,g.textContent=`â¤ï¸ ${C}`});const E=document.createElement("button");E.className="comment-btn",E.textContent="ğŸ’¬ Comment";const f=document.createElement("div");f.className="comment-form";const u=document.createElement("input");u.className="comment-input",u.type="text",u.placeholder="Write a comment...";const k=document.createElement("button");k.textContent="Post",f.appendChild(u),f.appendChild(k),o.appendChild(g),o.appendChild(E),o.appendChild(f);const h=document.createElement("div");h.className="comments",E.addEventListener("click",()=>{f.style.display=f.style.display==="flex"?"none":"flex"});const x=()=>{const y=u.value.trim();y&&(c(h,`You: ${y}`),u.value="",h.style.display="block",h.scrollTop=h.scrollHeight)};k.addEventListener("click",x),u.addEventListener("keydown",y=>y.key==="Enter"&&x()),r.appendChild(l),r.appendChild(o),r.appendChild(h),s.appendChild(r)})}async function v(){m.style.opacity="0",await new Promise(requestAnimationFrame);const a=[...await e(d,t),...await e(d+1,t),...await e(d+2,t)];b(a),N.remove(),m.style.opacity="1"}v(),m.addEventListener("click",()=>{d=d+3,v()})}function B(){const n=document.createElement("div");n.id="Image-popup",n.className="hidden",n.innerHTML=`
    <div class="popup-card">
      <span id="close-popup">&times;</span>

      <div class="popup-left">
        <img id="popup-img" src="" alt="popup image">
      </div>

      <div class="popup-right">
        <h3>Post Info</h3>
        <p>(This space is for Anna and Saheena to add likes and comments ğŸ˜ )</p>
      </div>

    </div>

    <button id="prev-popup" class="popup-nav">&#10094;</button>
    <button id="next-popup" class="popup-nav">&#10095;</button>
  `,document.body.appendChild(n);const s=n.querySelector("#popup-img"),m=n.querySelector("#close-popup"),d=n.querySelector("#prev-popup"),t=n.querySelector("#next-popup");let e=0,c=[];return m.addEventListener("click",()=>n.classList.add("hidden")),d.addEventListener("click",()=>{e=(e-1+c.length)%c.length,s.src=c[e]}),t.addEventListener("click",()=>{e=(e+1)%c.length,s.src=c[e]}),function(v,a){e=v,c=a.map(i=>i.src||i.url||i),s.src=c[e],n.classList.remove("hidden")}}const I=B();w();P(I);
